<!DOCTYPE HTML>
<html lang="<%= config.language %>">
<%- partial('_partial/head') %>
<body>
<!-- 页面加载动画 -->
<%- partial('_partial/loading-pages') %>

<header>
    <%- partial('_partial/header') %>
</header>

<main id="main_wrap">
    <%- body %>
</main>

<%- partial('_partial/footer') %>

<%- partial('_partial/all-btn') %>

<resource id="script">
    <!--  引入pjax  -->
    <%- partial('_partial/pjax') %>
    <!--  js依赖  -->
    <script src="<%- theme.jsDelivr.url %><%- theme.libs.js.materialize %>"></script>
    <script src="<%- theme.jsDelivr.url %><%- theme.libs.js.masonry %>"></script>
    <script src="<%- theme.jsDelivr.url %><%- theme.libs.js.aos %>"></script>
    <script src="<%- theme.jsDelivr.url %><%- theme.libs.js.scrollProgress %>"></script>
    <script src="<%- theme.jsDelivr.url %><%- theme.libs.js.lightgallery %>"></script>
    <script src="<%- theme.jsDelivr.url %>/js/matery.js"></script>
    <!--  内容搜索  -->
    <%- partial('_partial/search') %>
    <!-- 音乐 -->
    <% if(theme.music.enable && theme.music.fixed){ %>
        <%- partial('_widget/music') %>
    <% } %>

    <%- partial('_partial/baidu-analytics') %>
    <%- partial('_partial/baidu-push') %>
    <% if (theme.clicklove.enable) { %>
        <script src="<%- theme.jsDelivr.url %><%- theme.libs.js.clicklove %>" async="async"></script>
    <% } %>
    <% if (theme.busuanziStatistics && theme.busuanziStatistics.enable) { %>
        <script async src="<%- theme.jsDelivr.url %><%- theme.libs.js.busuanzi %>"></script>
    <% } %>

    <% if (theme.tidio.enable) { %>
        <script src="//code.tidio.co/<%- theme.tidio.public_key %>.js"></script>
        <script>
            $(document).ready(function () {
                setInterval(change_Tidio, 50);

                function change_Tidio() {
                    var tidio = $("#tidio-chat iframe");
                    if (tidio.css("display") == "block" && $(window).width() > 977) {
                        document.getElementById("tidio-chat-iframe").style.bottom = ($("div#backTop.top-scroll").css("display") == "none" && $(window).width() > 977) > 0 ? "-40px" : ($("div.toc-title").length && $(window).width() > 977) > 0 ? "<% if(theme.toc.showToggleBtn){ %>85px<% }else{ %>20px<% } %>" : "20px";
                        document.getElementById("tidio-chat-iframe").style.right = "-15px";
                        document.getElementById("tidio-chat-iframe").style.height = parseInt(tidio.css("height")) >= 520 ? "520px" : tidio.css("height");
                        document.getElementById("tidio-chat-iframe").style.zIndex = "997";
                    } else if (tidio.css("display") == "block" && $(window).width() > 601 && $(window).width() < 992) {
                        document.getElementById("tidio-chat-iframe").style.bottom = ($("div#backTop.top-scroll").css("display") == "none" && 601 < $(window).width() < 992) > 0 ? "-40px" : "20px";
                        document.getElementById("tidio-chat-iframe").style.right = "-15px";
                        document.getElementById("tidio-chat-iframe").style.zIndex = "997";
                    } else if (tidio.css("display") == "block" && $(window).width() < 601 && parseInt(tidio.css("height")) < 230) {
                        document.getElementById("tidio-chat-iframe").style.bottom = ($("div#backTop.top-scroll").css("display") == "none" && $(window).width() < 601) > 0 ? "-10px" : "45px";
                        document.getElementById("tidio-chat-iframe").style.zIndex = "997";
                    }
                    if (tidio.css("display") == "block" && $(window).width() < 601 && parseInt(tidio.css("height")) >= 230) {
                        document.getElementById("tidio-chat-iframe").style.zIndex = "998";
                    }
                }
            });
        </script>
    <% } %>

    <% if (theme.canvas_nest.enable) { %>
        <script type="text/javascript" color="<%- theme.canvas_nest.color %>"
                pointColor="<%- theme.canvas_nest.pointColor %>" opacity='<%- theme.canvas_nest.opacity %>'
                zIndex="<%- theme.canvas_nest.zIndex %>" count="<%- theme.canvas_nest.count %>"
                src="<%- theme.jsDelivr.url %><%- theme.libs.js.canvas_nest %>"></script>
    <% } %>

    <% if (theme.ribbon.enable) { %>
        <% var ribbonSrc = theme.ribbon.clickChange ? theme.libs.js.ribbon : theme.libs.js.ribbonRefresh; %>
        <script type="text/javascript" size="<%- theme.ribbon.size %>" alpha='<%- theme.ribbon.alpha %>'
                zIndex="<%- theme.ribbon.zIndex %>" src="<%- theme.jsDelivr.url %><%- ribbonSrc %>"
                async="async"></script>
    <% } %>

    <% if (theme.ribbon_dynamic.enable) { %>
        <script type="text/javascript" src="<%- theme.jsDelivr.url %><%- theme.libs.js.ribbon_dynamic %>"
                async="async"></script>
    <% } %>

    <% if (theme.instantpage.enable) { %>
        <script src="<%- theme.jsDelivr.url %><%- theme.libs.js.instantpage %>" type="module"></script>
    <% } %>
    <!-- 天气 -->
    <div id="tp-weather-widget"></div>
    <script>
        (function (a, h, g, f, e, d, c, b) {
            b = function () {
                d = h.createElement(g);
                c = h.getElementsByTagName(g)[0];
                d.src = e;
                d.charset = "utf-8";
                d.async = 1;
                c.parentNode.insertBefore(d, c)
            };
            a["SeniverseWeatherWidgetObject"] = f;
            a[f] || (a[f] = function () {
                (a[f].q = a[f].q || []).push(arguments)
            });
            a[f].l = +new Date();
            if (a.attachEvent) {
                a.attachEvent("onload", b)
            } else {
                a.addEventListener("load", b, false)
            }
        }(window, document, "script", "SeniverseWeatherWidget", "//cdn.sencdn.com/widget2/static/js/bundle.js?t=" + parseInt((new Date().getTime() / 100000000).toString(), 10)));
        window.SeniverseWeatherWidget('show', {
            flavor: "bubble",
            location: "WRR2Q2Z7CXWM",
            geolocation: true,
            language: "zh-Hans",
            unit: "c",
            theme: "auto",
            token: "1827bac2-898a-4c4f-bc66-ae816694adee",
            hover: "enabled",
            container: "tp-weather-widget"
        })
        if (localStorage.getItem('dark') === '1') {
            document.body.classList.add('dark');
        } else if (new Date().getHours() >= 22 || new Date().getHours() < 7) {
            document.body.classList.add('dark');
        } else if (matchMedia('(prefers-color-scheme: dark)').matches) {
            document.body.classList.add('dark');
        }
    </script>
    <!--  点击特效  -->
    <canvas class="fireworks" style="position: fixed;left: 0;top: 0;z-index: 1; pointer-events: none;"></canvas>
    <script type="text/javascript" src="//cdn.bootcss.com/animejs/2.2.0/anime.min.js"></script>
    <script type="text/javascript" src="https://mingxin142.gitee.io/Mousedjtx/mcse1.js"></script>
    <!--  评论特效  -->
    <script src="https://cdn.jsdelivr.net/gh/suyin-long/activate-power-mode@1.0/dist/activate-power-mode.js"></script>
    <script>
        POWERMODE.colorful = true; // make power mode colorful
        POWERMODE.shake = false; // turn off shake
        document.body.addEventListener('input', POWERMODE);
    </script>

    <script>
        //隐藏右键
        // document.oncontextmenu = function (event){
        //     if(window.event){
        //     event = window.event;
        //     }try{
        //     var the = event.srcElement;
        //     if (!((the.tagName == "INPUT" && the.type.toLowerCase() == "text") || the.tagName == "TEXTAREA")){
        //     return false;
        //     }
        //     return true;
        //     }catch (e){
        //     return false;
        //     }
        // }

        // debugger部分
        setInterval(function() {
            check();
        }, 500);
        var check = function() {
            function doCheck(a) {
                if (('' + a / a)['length'] !== 1 || a % 20 === 0) {
                    (function() {}['constructor']('debugger')());
                } else {
                    (function() {}['constructor']('debugger')());
                }
                doCheck(++a);
            }
            try {
                doCheck(0);
            } catch (err) {}
        };
        check();

        // ctrl+s保存
        document.onkeydown = function() {
            if ((e.ctrlKey) && (e.keyCode == 83)) { //ctrl+s
                return false;
            }
        }
        window.addEventListener("keydown", function(e) {
            //可以判断是不是mac，如果是mac,ctrl变为花键
            //event.preventDefault() 方法阻止元素发生默认的行为。
            if((e.key=='s'||e.key=='S')&&(navigator.platform.match("Mac") ? e.metaKey : e.ctrlKey)){
                e.preventDefault();
            }
        }, false);
        // F12
        document.onkeydown = function(){
            if(window.event && window.event.keyCode == 123) {
                event.keyCode=0;
                event.returnValue=false;
            }
            if(window.event && window.event.keyCode == 13) {
                window.event.keyCode = 505;
            }
            if(window.event && window.event.keyCode == 8) {
                window.event.returnValue=false;
            }
        }
        //宽高
        var threshold = 160; // 打开控制台的宽或高阈值
        // // 每秒检查一次
        window.setInterval(function() {
            if (window.outerWidth - window.innerWidth > threshold ||
                window.outerHeight - window.innerHeight > threshold) {
                // 如果打开控制台，则刷新页面
                window.location.reload();
            }
        }, 1e3);

        //debug调试时跳转页面
        var element = new Image();
        Object.defineProperty(element,'id',{get:function(){window.location.href="https://pic.downk.cc/item/5fe1a6073ffa7d37b349bf90.jpg"}});
        console.log(element);
    </script>

</resource>

</body>

</html>


